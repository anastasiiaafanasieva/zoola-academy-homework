{"mappings":"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","sources":["src/app.js"],"sourcesContent":["'use strict';\n\nconst mesh = document.querySelector('.mesh');\nconst gameParamsContainer = document.querySelector('.game-params-container');\nconst itemsPerRow = 5;\nconst itemsPerColumn = 5;\nconst meshWidth = mesh.clientWidth;\nconst meshHeight = mesh.clientHeight;\nconst scoreContainer = document.querySelector('.score-number');\nconst selectGameSpeed = document.querySelector('.game-speed__select');\nconst itemWidth = meshWidth / itemsPerRow;\nconst itemHeight = meshHeight / itemsPerColumn;\nconst itemsQuantity = (meshWidth / itemWidth) * (meshHeight / itemHeight);\nconst successClickPoint = 1;\nconst doubleClickPoint = 2;\nconst clickOutsideElementPoint = 3;\nconst missedClickPoint = 5;\nconst limitScore = 20;\n\nfunction appendItemsOnMesh() {\n  const newItem = document.createElement('div');\n  newItem.className = 'mesh__item';\n  mesh.append(newItem);\n}\n\nfor (let i = 0; i < itemsQuantity; i++) {\n  appendItemsOnMesh();\n}\n\nconst meshSize = mesh.children.length;\n\n/**\n * @description A function that will run our game using SetInterval\n * The number id value returned by setInterval() function and itâ€™s passed into the clearInterval() function to clear the interval\n */\nlet gameInterval;\n/**\n * @description A function to be executed after each game iteration, is set to null by default\n */\nlet deactivateElement = null;\n/**\n * @description Current score\n */\nlet currentScore;\n/**\n * @description Game speed\n */\nlet gameIterationDuration;\n/**\n * @description Status of click\n */\nlet isClicked = false;\n/**\n * @description Status of click on highlighted element\n */\nlet isClickedOnElement = false;\n/**\n * @description A function that checks if index is different from previous\n */\nlet randomIndex;\n/**\n * @description Current highlighted element on the mesh\n */\nlet highlightedElement;\n\nselectGameSpeed.addEventListener('change', setGameSpeed);\n\nfunction setGameSpeed(e) {\n  clearStartButton();\n  resetPrevGameResult();\n  createStartButton();\n\n  gameIterationDuration = e.target.value;\n}\n\nfunction startNewGame() {\n  const startButton = document.querySelector('.start-game__button');\n\n  startButton.innerText = 'Start';\n  mesh.addEventListener('click', handleClickOutsideElement);\n  resetPrevGameResult();\n  setIntervalImmediately(runGameIteration, gameIterationDuration);\n}\n\nfunction setIntervalImmediately(func, interval) {\n  if (currentScore <= -limitScore || currentScore >= limitScore) {\n    createResultNotification(currentScore);\n    stopGameIteration(highlightedElement);\n  } else {\n    func();\n\n    return gameInterval = setInterval(func, interval);\n  }\n}\n\nfunction resetPrevGameResult() {\n  if (highlightedElement) {\n    highlightedElement.className = 'mesh__item';\n  }\n\n  clearResultNotification();\n  clearInterval(gameInterval);\n\n  scoreContainer.innerText = '0';\n  handleScoreColor();\n  currentScore = missedClickPoint;\n  isClicked = false;\n}\n\nfunction stopGameIteration(element) {\n  clearInterval(gameInterval);\n  element.removeEventListener('click', handleClick);\n  mesh.removeEventListener('click', handleClickOutsideElement);\n}\n\nfunction handleClick() {\n  if (Boolean(isClicked)) {\n    scoreContainer.innerText = currentScore -= doubleClickPoint;\n  } else {\n    scoreContainer.innerText = currentScore += successClickPoint;\n    isClickedOnElement = true;\n  }\n\n  handleScoreColor();\n\n  isClicked = true;\n\n  clearInterval(gameInterval);\n  setIntervalImmediately(runGameIteration, gameIterationDuration);\n}\n\nfunction handleClickOutsideElement() {\n  if (Boolean(!isClickedOnElement)) {\n    scoreContainer.innerText = currentScore -= clickOutsideElementPoint;\n  }\n\n  if (currentScore <= -limitScore) {\n    createResultNotification(currentScore);\n    stopGameIteration(highlightedElement);\n  }\n\n  handleScoreColor();\n  isClickedOnElement = false;\n}\n\nfunction runGameIteration() {\n  randomIndex = getIndex();\n\n  /**\n   * Alternatively, this could be written like following: deactivateElement?.()\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining\n   */\n  if (deactivateElement) {\n    deactivateElement();\n  }\n\n  const activeElement = mesh.children[randomIndex];\n\n  if (Boolean(!isClicked)) {\n    scoreContainer.innerText = currentScore -= missedClickPoint;\n  }\n\n  handleScoreColor();\n\n  if (activeElement) {\n    deactivateElement = activateElement(activeElement);\n    isClicked = false;\n  }\n\n  if (currentScore <= -limitScore || currentScore >= limitScore) {\n    createResultNotification(currentScore);\n    stopGameIteration(activeElement);\n  }\n}\n\nfunction activateElement(element) {\n  const variant = getVariantForIndex();\n  element.classList.add('item-highlighted', variant);\n  element.addEventListener('click', handleClick);\n  highlightedElement = element;\n\n  /**\n   * `activateElement` returns a clean-up function that we can later execute to undo any changes made to the active element.\n   * It it very convenient to have such function defined immediately, while we still have `variant` and `element` available.\n   * A mechanism of returning a function is called \"closure\".\n   */\n  return function unhighlight() {\n    element.removeEventListener('click', handleClick);\n    element.classList.remove('item-highlighted', variant);\n  };\n}\n\n/**\n * @description This function takes an integer and returns a random integer between 0 and the given number\n */\nfunction getRandomNumber(max) {\n  return Math.floor(Math.random() * 100) % max;\n}\n\nfunction getVariantForIndex() {\n  const variants = [\n    'item-highlighted-1',\n    'item-highlighted-2',\n    'item-highlighted-3',\n  ];\n  return variants[getRandomNumber(meshSize - 1) % variants.length];\n}\n\nfunction getIndex() {\n  let index;\n  do {\n    index = getRandomNumber(meshSize - 1);\n  } while (randomIndex === index);\n\n  return index;\n}\n\nfunction handleScoreColor() {\n  if (+scoreContainer.innerText < 0) {\n    scoreContainer.classList.add('danger-score');\n  } else {\n    scoreContainer.classList.remove('danger-score');\n  }\n}\n\nfunction createResultNotification(result) {\n  const notification = document.createElement('div');\n  const startButton = document.querySelector('.start-game__button');\n\n  notification.className = 'result-notification';\n  if (result <= -limitScore) {\n    notification.innerText = `Oops! Try again? ${String.fromCodePoint(0x1F340)}`;\n  } else {\n    notification.innerText = `Congrats! You win ${String.fromCodePoint(0x1F389)}`;\n  }\n\n  startButton.innerText = 'Try again';\n  gameParamsContainer.append(notification);\n}\n\nfunction clearResultNotification() {\n  const activeNotification = document.querySelector('.result-notification');\n\n  if (activeNotification) {\n    activeNotification.remove();\n  }\n}\n\nfunction createStartButton() {\n  const startButtonContainer = document.createElement('div');\n  const startButton = document.createElement('button');\n\n  startButtonContainer.className = 'start-game';\n  startButton.className = 'start-game__button';\n  startButton.innerText = 'Start';\n\n  startButtonContainer.append(startButton);\n  gameParamsContainer.append(startButtonContainer);\n\n  startButton.addEventListener('click', startNewGame);\n}\n\nfunction clearStartButton() {\n  const startButtonContainer = document.querySelector('.start-game');\n\n  if (startButtonContainer) {\n    startButtonContainer.remove();\n  }\n}\n"],"names":[],"version":3,"file":"index.816e7b21.js.map","sourceRoot":"/__parcel_source_root/"}